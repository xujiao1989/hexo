---
title: 前端性能优化--学习总结
date: 2017-04-05
tags:
  - 前端开发
  - 个人成长
  - 前端性能优化 
categories: 性能优化
---

本文主要是自己在了解前端性能优化过程觉得比较好的文章的总结。

## 一、雅虎军规14条
前端的性能优化已经是老生常谈的话题，面试和实际工作中都会遇到如何去做前端优化。在做优化之前，我们至少要熟知雅虎的14条军规：

![雅虎军规35条](/images/雅虎35.PNG)

#### 减少http请求
网速相同的条件下，下载一个100KB的图片比下载两个50KB的图片要快。所以，请减少HTTP请求。
+ 合并文件（js、css、雪碧图等）
+ Inline images: 通过编码的字符串将图片内嵌到网页文本中。例如下面的inline image的显示效果为一个勾选的checkbox。
```css
.sample-inline-png {
    padding-left: 20px;
    background: white url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAD///+l2Z/dAAAAM0lEQVR4nGP4/5/h/1+G/58ZDrAz3D/McH8yw83NDDeNGe4Ug9C9zwz3gVLMDA/A6P9/AFGGFyjOXZtQAAAAAElFTkSuQmCC') no-repeat scroll left top;
}
```
#### 根据域名划分内容
浏览器一般对**同一个域的下载连接数有所限制，按照域名划分下载内容可以浏览器增大并行下载连接，**但是注意控制域名使用在2-4个之间，不然dns查询也是个问题。一般网站规划会将静态资源放在类似于static.example.com，动态内容放在www.example.com上。这样做还有一个好处是可以在静态的域名上避免使用cookie。后面我们会在cookie的规则中提到。 

#### 减少iframe数量

+ 优点：
    + 可以用来加载速度较慢的内容，例如广告。
    + 安全沙箱保护。浏览器会对iframe中的内容进行安全控制。
    + 脚本可以并行下载
    
+ 缺点：
    + 即使iframe内容为空也消耗加载时间
    + 会阻止页面加载
    + 没有语义
    
## 二、我们在工作中如何做优化

对于已有的项目，我们可以利用chrome的network查看页面中资源的加载速度和哪些资源特别的消耗了性能；利用chrome插件pagespeed分析页面，它会针对页面给出详细的分析和推荐解决方案。
总的来说，还是要遵循雅虎35条。

+ 关于图片的优化

    推荐读下面的几篇文章

+ 关于css的优化
    + 合理的合并css文件
    + 不要使用css的表达式：“为了确保有效性，CSS 表达式会进行频繁的求值”，到底有多频繁？就是在你改变窗口大小，滚动页面甚至移动鼠标都会触发表达式进行求值，如此频繁的求值以至于浏览器的性能收到严重的影响；
    + 将样式表放在头部、使用link代替import
    + 避免使用filters
    
+ 关于js的优化

    + 避免使用with
    + 减少dom的访问
    + js放在页面底部
    
+ 减少repaint和reflow

## 三、推荐阅读

+ [dns-prefetch 对性能提升有多大](http://blog.sina.com.cn/s/blog_bf9440220102wwgo.html)
+ [前端性能优化----yahoo前端性能团队总结的35条黄金定律](前端性能优化----yahoo前端性能团队总结的35条黄金定律)
+ [Web性能优化：图片优化](http://www.cnblogs.com/wizcabbit/p/web-image-optimization.html)
+ [前端开发中，对图片的优化技巧有哪些？](https://www.zhihu.com/question/21815101)
+ [WebP 探寻之路](http://isux.tencent.com/introduction-of-webp.html)
+ [CSS Expression用法总结](http://www.cnblogs.com/rubylouvre/archive/2009/07/29/1534330.html)
+ [javascript性能优化-repaint和reflow](http://www.cnblogs.com/jiajiaobj/archive/2012/06/11/2545291.html)
+ [回流与重绘：CSS性能让JavaScript变慢？](http://www.zhangxinxu.com/wordpress/2010/01/%E5%9B%9E%E6%B5%81%E4%B8%8E%E9%87%8D%E7%BB%98%EF%BC%9Acss%E6%80%A7%E8%83%BD%E8%AE%A9javascript%E5%8F%98%E6%85%A2%EF%BC%9F/)
+ [[Web 性能] repaint and reflow (重绘和回流)](http://blog.csdn.net/oscar999/article/details/38379523)
+ [优化TTFB](http://blog.csdn.net/fumier/article/details/50511174)
+ [网页性能管理详解](http://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html)
+ [减少页面回流与重绘（Reflow & Repaint）](http://harttle.com/2015/08/11/reflow-repaint.html)
---
做一个勤于思考的人
